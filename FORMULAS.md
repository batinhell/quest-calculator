# Формулы расчёта стоимости презентации

## Оглавление
1. [Константы и параметры](#константы-и-параметры)
2. [Формулы расчёта цены за слайд](#формулы-расчёта-цены-за-слайд)
3. [Формулы расчёта цены за отрисовку](#формулы-расчёта-цены-за-отрисовку)
4. [Обратные расчёты (от цены к количеству)](#обратные-расчёты-от-цены-к-количеству)
5. [Расчёт надбавки за срочность](#расчёт-надбавки-за-срочность)
6. [Расчёт кейвижуала](#расчёт-кейвижуала)
7. [Итоговая стоимость](#итоговая-стоимость)
8. [Примеры расчётов](#примеры-расчётов)

---

## Константы и параметры

### Типы проектов
- **Ивент** (`event`)
- **Квест** (`quest`)

### Значения по умолчанию
```
slides = 20 (слайдов)
decor = 0 (отрисовок)
days = 14 (дней до дедлайна)
keyVisual = false (кейвижуал не включён)
```

### Диапазоны значений
```
Слайды: 0-200 шт
Отрисовки: 0-50 шт
Сроки: 3-30 дней (минимум 3 дня)
```

---

## Формулы расчёта цены за слайд

### Для Ивентов

**Константы:**
```
maxPrice = 2500₽
minPrice = 1500₽
threshold_min = 30 слайдов
threshold_max = 200 слайдов
```

**Формула:**

```
PricePerSlide(n) = {
  2500₽,                                            если n ≤ 30
  1500₽,                                            если n ≥ 200
  2500₽ - (n - 30) × (2500₽ - 1500₽) / 170,       если 30 < n < 200
}
```

**Упрощённая формула для диапазона 30 < n < 200:**
```
PricePerSlide(n) = 2500₽ - (n - 30) × 1000₽ / 170
PricePerSlide(n) = 2500₽ - (n - 30) × 5.88235₽
```

**Примеры:**
- n = 20 слайдов → 2500₽/шт
- n = 30 слайдов → 2500₽/шт
- n = 50 слайдов → 2500₽ - (50 - 30) × 5.88235₽ = 2382.35₽/шт
- n = 100 слайдов → 2500₽ - (100 - 30) × 5.88235₽ = 2088.24₽/шт
- n = 150 слайдов → 2500₽ - (150 - 30) × 5.88235₽ = 1794.12₽/шт
- n = 200 слайдов → 1500₽/шт
- n = 250 слайдов → 1500₽/шт

### Для Квестов

**Константы:**
```
maxPrice = 2000₽
minPrice = 1000₽
threshold_min = 30 слайдов
threshold_max = 200 слайдов
```

**Формула:**

```
PricePerSlide(n) = {
  2000₽,                                            если n ≤ 30
  1000₽,                                            если n ≥ 200
  2000₽ - (n - 30) × (2000₽ - 1000₽) / 170,       если 30 < n < 200
}
```

**Упрощённая формула для диапазона 30 < n < 200:**
```
PricePerSlide(n) = 2000₽ - (n - 30) × 1000₽ / 170
PricePerSlide(n) = 2000₽ - (n - 30) × 5.88235₽
```

**Примеры:**
- n = 20 слайдов → 2000₽/шт
- n = 30 слайдов → 2000₽/шт
- n = 50 слайдов → 2000₽ - (50 - 30) × 5.88235₽ = 1882.35₽/шт
- n = 100 слайдов → 2000₽ - (100 - 30) × 5.88235₽ = 1588.24₽/шт
- n = 150 слайдов → 2000₽ - (150 - 30) × 5.88235₽ = 1294.12₽/шт
- n = 200 слайдов → 1000₽/шт

---

## Формулы расчёта цены за отрисовку

### Для Ивентов

**Константы:**
```
maxPrice = 1500₽
minPrice = 750₽
threshold_min = 10 отрисовок
threshold_max = 30 отрисовок
```

**Формула:**

```
DecorPrice(m) = {
  1500₽,                                           если m ≤ 10
  750₽,                                            если m ≥ 30
  1500₽ - (m - 10) × (1500₽ - 750₽) / 20,        если 10 < m < 30
}
```

**Упрощённая формула для диапазона 10 < m < 30:**
```
DecorPrice(m) = 1500₽ - (m - 10) × 750₽ / 20
DecorPrice(m) = 1500₽ - (m - 10) × 37.5₽
```

**Примеры:**
- m = 5 отрисовок → 1500₽/шт
- m = 10 отрисовок → 1500₽/шт
- m = 15 отрисовок → 1500₽ - (15 - 10) × 37.5₽ = 1312.5₽/шт
- m = 20 отрисовок → 1500₽ - (20 - 10) × 37.5₽ = 1125₽/шт
- m = 25 отрисовок → 1500₽ - (25 - 10) × 37.5₽ = 937.5₽/шт
- m = 30 отрисовок → 750₽/шт
- m = 40 отрисовок → 750₽/шт

### Для Квестов

**Константы:**
```
maxPrice = 1000₽
minPrice = 500₽
threshold_min = 10 отрисовок
threshold_max = 30 отрисовок
```

**Формула:**

```
DecorPrice(m) = {
  1000₽,                                           если m ≤ 10
  500₽,                                            если m ≥ 30
  1000₽ - (m - 10) × (1000₽ - 500₽) / 20,        если 10 < m < 30
}
```

**Упрощённая формула для диапазона 10 < m < 30:**
```
DecorPrice(m) = 1000₽ - (m - 10) × 500₽ / 20
DecorPrice(m) = 1000₽ - (m - 10) × 25₽
```

**Примеры:**
- m = 5 отрисовок → 1000₽/шт
- m = 10 отрисовок → 1000₽/шт
- m = 15 отрисовок → 1000₽ - (15 - 10) × 25₽ = 875₽/шт
- m = 20 отрисовок → 1000₽ - (20 - 10) × 25₽ = 750₽/шт
- m = 25 отрисовок → 1000₽ - (25 - 10) × 25₽ = 625₽/шт
- m = 30 отрисовок → 500₽/шт

---

## Обратные расчёты (от цены к количеству)

### Расчёт количества слайдов по заданной цене

Эта формула используется, когда пользователь вручную изменяет цену за слайд.

#### Для Ивентов

**Константы:**
```
maxPrice = 2500₽
minPrice = 1500₽
```

**Формула:**

```
SlidesFromPrice(p) = {
  30,                                              если p ≥ 2500₽
  200,                                             если p ≤ 1500₽
  30 + ((2500₽ - p) × 170) / (2500₽ - 1500₽),    если 1500₽ < p < 2500₽
}
```

**Упрощённая формула для диапазона 1500₽ < p < 2500₽:**
```
SlidesFromPrice(p) = 30 + ((2500₽ - p) × 170) / 1000₽
SlidesFromPrice(p) = 30 + (2500₽ - p) × 0.17
```

**Примеры:**
- p = 2500₽ → 30 слайдов
- p = 2300₽ → 30 + (2500₽ - 2300₽) × 0.17 = 30 + 34 = 64 слайда
- p = 2000₽ → 30 + (2500₽ - 2000₽) × 0.17 = 30 + 85 = 115 слайдов
- p = 1700₽ → 30 + (2500₽ - 1700₽) × 0.17 = 30 + 136 = 166 слайдов
- p = 1500₽ → 200 слайдов

#### Для Квестов

**Константы:**
```
maxPrice = 2000₽
minPrice = 1000₽
```

**Формула:**

```
SlidesFromPrice(p) = {
  30,                                              если p ≥ 2000₽
  200,                                             если p ≤ 1000₽
  30 + ((2000₽ - p) × 170) / (2000₽ - 1000₽),    если 1000₽ < p < 2000₽
}
```

**Упрощённая формула для диапазона 1000₽ < p < 2000₽:**
```
SlidesFromPrice(p) = 30 + ((2000₽ - p) × 170) / 1000₽
SlidesFromPrice(p) = 30 + (2000₽ - p) × 0.17
```

**Примеры:**
- p = 2000₽ → 30 слайдов
- p = 1800₽ → 30 + (2000₽ - 1800₽) × 0.17 = 30 + 34 = 64 слайда
- p = 1500₽ → 30 + (2000₽ - 1500₽) × 0.17 = 30 + 85 = 115 слайдов
- p = 1200₽ → 30 + (2000₽ - 1200₽) × 0.17 = 30 + 136 = 166 слайдов
- p = 1000₽ �� 200 слайдов

### Расчёт количества отрисовок по заданной цене

Эта формула используется, когда пользователь вручную изменяет цену за отрисовку.

#### Для Ивентов

**Константы:**
```
maxPrice = 1500₽
minPrice = 750₽
```

**Формула:**

```
DecorFromPrice(p) = {
  10,                                              если p ≥ 1500₽
  30,                                              если p ≤ 750₽
  10 + ((1500₽ - p) × 20) / (1500₽ - 750₽),      если 750₽ < p < 1500₽
}
```

**Упрощённая формула для диапазона 750₽ < p < 1500₽:**
```
DecorFromPrice(p) = 10 + ((1500₽ - p) × 20) / 750₽
DecorFromPrice(p) = 10 + (1500₽ - p) × 0.02667
```

**Примеры:**
- p = 1500₽ → 10 отрисовок
- p = 1300₽ → 10 + (1500₽ - 1300₽) × 0.02667 = 10 + 5.33 ≈ 15 отрисовок
- p = 1125₽ → 10 + (1500₽ - 1125₽) × 0.02667 = 10 + 10 = 20 отрисовок
- p = 900₽ → 10 + (1500₽ - 900₽) × 0.02667 = 10 + 16 = 26 отрисовок
- p = 750₽ → 30 отрисовок

#### Для Квестов

**Константы:**
```
maxPrice = 1000₽
minPrice = 500₽
```

**Формула:**

```
DecorFromPrice(p) = {
  10,                                              если p ≥ 1000₽
  30,                                              если p ≤ 500₽
  10 + ((1000₽ - p) × 20) / (1000₽ - 500₽),      если 500₽ < p < 1000₽
}
```

**Упрощённая формула для диапазона 500₽ < p < 1000₽:**
```
DecorFromPrice(p) = 10 + ((1000₽ - p) × 20) / 500₽
DecorFromPrice(p) = 10 + (1000₽ - p) × 0.04
```

**Примеры:**
- p = 1000₽ → 10 отрисовок
- p = 875₽ → 10 + (1000₽ - 875₽) × 0.04 = 10 + 5 = 15 отрисовок
- p = 750₽ → 10 + (1000₽ - 750₽) × 0.04 = 10 + 10 = 20 отрисовок
- p = 625₽ → 10 + (1000₽ - 625₽) × 0.04 = 10 + 15 = 25 отрисовок
- p = 500₽ → 30 отрисовок

---

## Расчёт надбавки за срочность

### Формула коэффициента срочности

**Константы:**
```
threshold = 14 дней (пороговое значение)
baseCoef = 0.15 (базовый коэффициент)
```

**Формула:**

```
RushCoef(d) = {
  0,                                               если d ≥ 14
  0.15 × ((14 - d) / 11)²,                        если d < 14
}
```

**Примеры:**
- d = 14 дней → 0% (без надбавки)
- d = 10 дней → 0.15 × ((14 - 10) / 11)² = 0.15 × (4/11)² = 0.15 × 0.1322 = 0.01983 ≈ 1.98%
- d = 7 дней → 0.15 × ((14 - 7) / 11)² = 0.15 × (7/11)² = 0.15 × 0.4049 = 0.06074 ≈ 6.07%
- d = 5 дней → 0.15 × ((14 - 5) / 11)² = 0.15 × (9/11)² = 0.15 × 0.6694 = 0.10041 ≈ 10.04%
- d = 3 дня → 0.15 × ((14 - 3) / 11)² = 0.15 × (11/11)² = 0.15 × 1 = 0.15 = 15%

### Расчёт суммы надбавки

```
RushAddon = BaseCost × RushCoef(d)
```

Где `BaseCost` — базовая стоимость (включает слайды, отрисовки и кейвижуал).

**Примеры:**
- BaseCost = 50 000₽, d = 14 дней → RushAddon = 50 000₽ × 0 = 0₽
- BaseCost = 50 000₽, d = 10 дней → RushAddon = 50 000₽ × 0.01983 = 991.5₽
- BaseCost = 50 000₽, d = 7 дней → RushAddon = 50 000₽ × 0.06074 = 3 037₽
- BaseCost = 50 000₽, d = 5 дней → RushAddon = 50 000₽ × 0.10041 = 5 020.5₽
- BaseCost = 50 000₽, d = 3 дня → RushAddon = 50 000₽ × 0.15 = 7 500₽

---

## Расчёт кейвижуала

### Фиксированная стоимость

**Для Ивентов:**
```
KeyVisualPrice = 30 000₽
```

**Для Квестов:**
```
KeyVisualPrice = 20 000₽
```

### Формула

```
KeyVisualCost = {
  KeyVisualPrice,   если кейвижуал включён
  0₽,               если кейвижуал выключен
}
```

---

## Итоговая стоимость

### Формула расчёта базовой стоимости

```
BaseCost = (Slides × PricePerSlide) + (Decor × DecorPrice) + KeyVisualCost
```

Где:
- `Slides` — количество слайдов
- `PricePerSlide` — цена за один слайд
- `Decor` — количество отрисовок
- `DecorPrice` — цена за одну отрисовку
- `KeyVisualCost` — стоимость кейвижуала (0₽ или фиксированная цена)

### Формула расчёта итоговой стоимости

```
TotalCost = BaseCost + RushAddon
```

Где:
- `BaseCost` — базовая стоимость
- `RushAddon` — надбавка за срочность

### Альтернативная запись

```
TotalCost = BaseCost × (1 + RushCoef)
```

---

## Примеры расчётов

### Пример 1: Ивент, стандартные параметры

**Исходные данные:**
- Тип: Ивент
- Слайды: 20 шт
- Отрисовки: 0 шт
- Сроки: 14 дней
- Кейвижуал: нет

**Расчёт:**
1. PricePerSlide(20) = 2500₽ (так как 20 ≤ 30)
2. DecorPrice(0) = 1500₽ (так как 0 ≤ 10)
3. KeyVisualCost = 0₽
4. BaseCost = 20 × 2500₽ + 0 × 1500₽ + 0₽ = 50 000₽
5. RushCoef(14) = 0 (так как 14 ≥ 14)
6. RushAddon = 50 000₽ × 0 = 0₽
7. **TotalCost = 50 000₽ + 0₽ = 50 000₽**

### Пример 2: Ивент с кейвижуалом и срочностью

**Исходные данные:**
- Тип: Ивент
- Слайды: 50 шт
- Отрисовки: 15 шт
- Сроки: 7 дней
- Кейвижуал: да

**Расчёт:**
1. PricePerSlide(50) = 2500₽ - (50 - 30) × 5.88235₽ = 2382.35₽
2. DecorPrice(15) = 1500₽ - (15 - 10) × 37.5₽ = 1312.5₽
3. KeyVisualCost = 30 000₽
4. BaseCost = 50 × 2382.35₽ + 15 × 1312.5₽ + 30 000₽ = 119 117.5₽ + 19 687.5₽ + 30 000₽ = 168 805₽
5. RushCoef(7) = 0.15 × ((14 - 7) / 11)² = 0.15 × 0.4049 = 0.06074
6. RushAddon = 168 805₽ × 0.06074 = 10 253₽
7. **TotalCost = 168 805₽ + 10 253₽ = 179 058₽**

### Пример 3: Квест с большим количеством слайдов

**Исходные данные:**
- Тип: Квест
- Слайды: 150 шт
- Отрисовки: 25 шт
- Сроки: 10 дней
- Кейвижуал: нет

**Расчёт:**
1. PricePerSlide(150) = 2000₽ - (150 - 30) × 5.88235₽ = 1294.12₽
2. DecorPrice(25) = 1000₽ - (25 - 10) × 25₽ = 625₽
3. KeyVisualCost = 0₽
4. BaseCost = 150 × 1294.12₽ + 25 × 625₽ + 0₽ = 194 118₽ + 15 625₽ = 209 743₽
5. RushCoef(10) = 0.15 × ((14 - 10) / 11)² = 0.15 × 0.1322 = 0.01983
6. RushAddon = 209 743₽ × 0.01983 = 4 159₽
7. **TotalCost = 209 743₽ + 4 159₽ = 213 902₽**

### Пример 4: Квест, максимальная срочность

**Исходные данные:**
- Тип: Квест
- Слайды: 30 шт
- Отрисовки: 10 шт
- Сроки: 3 дня
- Кейвижуал: да

**Расчёт:**
1. PricePerSlide(30) = 2000₽ (так как 30 ≤ 30)
2. DecorPrice(10) = 1000₽ (так как 10 ≤ 10)
3. KeyVisualCost = 20 000₽
4. BaseCost = 30 × 2000₽ + 10 × 1000₽ + 20 000₽ = 60 000₽ + 10 000₽ + 20 000₽ = 90 000₽
5. RushCoef(3) = 0.15 × ((14 - 3) / 11)² = 0.15 × 1 = 0.15
6. RushAddon = 90 000₽ × 0.15 = 13 500₽
7. **TotalCost = 90 000₽ + 13 500₽ = 103 500₽**

### Пример 5: Ивент, максимальное количество слайдов и отрисовок

**Исходные данные:**
- Тип: Ивент
- Слайды: 200 шт
- Отрисовки: 30 шт
- Сроки: 14 дней
- Кейвижуал: нет

**Расчёт:**
1. PricePerSlide(200) = 1500₽ (так как 200 ≥ 200)
2. DecorPrice(30) = 750₽ (так как 30 ≥ 30)
3. KeyVisualCost = 0₽
4. BaseCost = 200 × 1500₽ + 30 × 750₽ + 0₽ = 300 000₽ + 22 500₽ = 322 500₽
5. RushCoef(14) = 0 (так как 14 ≥ 14)
6. RushAddon = 322 500₽ × 0 = 0₽
7. **TotalCost = 322 500₽ + 0₽ = 322 500₽**

---

## Дополнительные замечания

### Округление
- Все промежуточные расчёты выполняются с точностью до копеек
- Итоговые суммы округляются до целых рублей при отображении

### Минимальные значения
- Минимальное количество дней: 3 дня (защита от слишком коротких сроков)
- Минимальная цена за слайд для ивентов: 1500₽
- Минимальная цена за слайд для квестов: 1000₽

### Обратная зависимость
При изменении цены вручную автоматически пересчитывается количество, и наоборот. Это обеспечивает согласованность данных между полями.

### Форматирование в интерфейсе
Все суммы отображаются в формате: `123 456 ₽` (с пробелами между разрядами)

---

## Таблица зависимости цены за слайд от количества

### Для Ивентов

| Слайды | Цена за слайд |
|--------|---------------|
| 0-30   | 2500₽         |
| 40     | 2441₽         |
| 50     | 2382₽         |
| 60     | 2324₽         |
| 70     | 2265₽         |
| 80     | 2206₽         |
| 90     | 2147₽         |
| 100    | 2088₽         |
| 110    | 2029₽         |
| 120    | 1971₽         |
| 130    | 1912₽         |
| 140    | 1853₽         |
| 150    | 1794₽         |
| 160    | 1735₽         |
| 170    | 1676₽         |
| 180    | 1618₽         |
| 190    | 1559₽         |
| 200+   | 1500₽         |

### Для Квестов

| Слайды | Цена за слайд |
|--------|---------------|
| 0-30   | 2000₽         |
| 40     | 1941₽         |
| 50     | 1882₽         |
| 60     | 1824₽         |
| 70     | 1765₽         |
| 80     | 1706₽         |
| 90     | 1647₽         |
| 100    | 1588₽         |
| 110    | 1529₽         |
| 120    | 1471₽         |
| 130    | 1412₽         |
| 140    | 1353₽         |
| 150    | 1294₽         |
| 160    | 1235₽         |
| 170    | 1176₽         |
| 180    | 1118₽         |
| 190    | 1059₽         |
| 200+   | 1000₽         |

## Таблица зависимости цены за отрисовку от количества

### Для Ивентов

| Отрисовки | Цена за отрисовку |
|-----------|-------------------|
| 0-10      | 1500₽             |
| 12        | 1425₽             |
| 15        | 1313₽             |
| 18        | 1200₽             |
| 20        | 1125₽             |
| 22        | 1050₽             |
| 25        | 938₽              |
| 28        | 825₽              |
| 30+       | 750₽              |

### Для Квестов

| Отрисовки | Цена за отрисовку |
|-----------|-------------------|
| 0-10      | 1000₽             |
| 12        | 950₽              |
| 15        | 875₽              |
| 18        | 800₽              |
| 20        | 750₽              |
| 22        | 700₽              |
| 25        | 625₽              |
| 28        | 550₽              |
| 30+       | 500₽              |

## Таблица надбавки за срочность

| Дни | Коэффициент | Процент |
|-----|-------------|---------|
| 14+ | 0.00000     | 0.00%   |
| 13  | 0.00124     | 0.12%   |
| 12  | 0.00496     | 0.50%   |
| 11  | 0.01116     | 1.12%   |
| 10  | 0.01983     | 1.98%   |
| 9   | 0.03099     | 3.10%   |
| 8   | 0.04463     | 4.46%   |
| 7   | 0.06074     | 6.07%   |
| 6   | 0.07934     | 7.93%   |
| 5   | 0.10041     | 10.04%  |
| 4   | 0.12397     | 12.40%  |
| 3   | 0.15000     | 15.00%  |

---

**Документ подготовлен:** 4 февраля 2026  
**Версия:** 1.0
